import{r as d,j as e,b as _}from"./index-ClSJhwQF.js";const v="https://new-json.onrender.com";function z(){const[l,b]=d.useState([]),[n,m]=d.useState([]),[x,f]=d.useState({key:"store_create_at",direction:"desc"}),[a,j]=d.useState({storeName:"",contact:"",status:"所有狀態"});d.useEffect(()=>{(async()=>{try{const t=await _.get(`${v}/storesData`);b(t.data),m(t.data)}catch(t){console.log(t.response.data.errors[0])}})()},[]);const h=s=>{j({...a,[s.target.id]:s.target.value})},y=()=>{const s=l.filter(t=>{const p=a.storeName===""||t.store_name.toLowerCase().includes(a.storeName.toLowerCase()),i=a.contact===""||t.store_contact.toLowerCase().includes(a.contact.toLowerCase()),o=a.status==="所有狀態"||t.store_isAuth===a.status;return p&&i&&o});m(s)},g=()=>{j({storeName:"",contact:"",status:"所有狀態"}),m(l)},r=s=>{let t="asc";x.key===s&&x.direction==="asc"&&(t="desc"),f({key:s,direction:t});const p=[...n].sort((i,o)=>{if(s==="store_create_at"){const u=new Date(i[s]),N=new Date(o[s]);return t==="asc"?u-N:N-u}else return t==="asc"?i[s]>o[s]?1:-1:i[s]<o[s]?1:-1});m(p)},c=s=>x.key!==s?e.jsx("div",{}):x.direction==="asc"?e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"18px",position:"absolute",padding:"3px 0"},children:"arrow_upward"}):e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"18px",position:"absolute",padding:"3px 0"},children:"arrow_downward"});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"custom-adminBg",children:e.jsxs("div",{className:"adminUser container pt-11 pb-6",children:[e.jsx("nav",{style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("span",{className:"fs-Body-2 fw-bold text-nature-50",children:"會員管理"})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:e.jsx("span",{className:"fs-Body-2 fw-bold text-nature-70",children:"店家"})})]})}),e.jsxs("div",{className:"searchBar mt-5 mb-6 row",children:[e.jsxs("div",{className:"col-6 col-lg-2",children:[e.jsx("label",{htmlFor:"storeName",className:"form-label fs-Caption text-black",children:"工作室名稱"}),e.jsx("input",{type:"text",className:"form-control bg-transparent border-black",id:"storeName",placeholder:"請輸入內容",value:a.storeName,onChange:h})]}),e.jsxs("div",{className:"col-6 col-lg-2",children:[e.jsx("label",{htmlFor:"contact",className:"form-label fs-Caption text-black",children:"聯絡人"}),e.jsx("input",{type:"text",className:"form-control bg-transparent border-black",id:"contact",placeholder:"請輸入內容",value:a.contact,onChange:h})]}),e.jsxs("div",{className:"col-6 col-lg-2",children:[e.jsx("label",{htmlFor:"status",className:"form-label fs-Caption text-black",children:"審核狀態"}),e.jsxs("select",{className:"form-select border-black",id:"status",value:a.status,onChange:h,children:[e.jsx("option",{value:"所有狀態",children:"所有狀態"}),e.jsx("option",{value:"processing",children:"處理中"}),e.jsx("option",{value:"pass",children:"通過"}),e.jsx("option",{value:"rejected",children:"已退回"})]})]}),e.jsx("div",{className:"col-lg-1 d-flex align-items-end my-3 my-lg-0",children:e.jsx("button",{className:"btn btn-search btn-primary-50 text-white form-control",onClick:y,children:"搜尋"})}),e.jsx("div",{className:"col-lg-1 d-flex align-items-end",children:e.jsx("button",{className:"btn btn-reset btn-outline-secondary form-control",onClick:g,children:"重置"})})]}),e.jsx("div",{className:"table-container d-none d-lg-block bg-white border rounded-2 border-nature-90 p-6",children:e.jsx("div",{className:"table-scroll-container overflow-scroll",children:e.jsxs("table",{className:"storeTable w-100",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-4 py-3",onClick:()=>r("store_id"),children:["ID ",c("store_id")]}),e.jsxs("th",{className:"px-4 py-3",onClick:()=>r("store_name"),children:["店家名稱 ",c("store_name")]}),e.jsxs("th",{className:"px-4 py-3",onClick:()=>r("store_contact"),children:["聯絡人 ",c("store_contact")]}),e.jsxs("th",{className:"px-4 py-3",onClick:()=>r("store_self_tel"),children:["聯絡電話 ",c("store_self_tel")]}),e.jsxs("th",{className:"px-4 py-3",onClick:()=>r("store_isAuth"),children:["審核狀態 ",c("store_isAuth")]}),e.jsxs("th",{className:"px-4 py-3",onClick:()=>r("store_create_at"),children:["建立時間 ",c("store_create_at")]}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsx("tbody",{children:n.length>0?n.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-4",children:s.store_id}),e.jsx("td",{className:"py-2 px-4",children:s.store_name}),e.jsx("td",{className:"py-2 px-4",children:s.store_contact}),e.jsx("td",{className:"py-2 px-4",children:s.store_self_tel}),e.jsx("td",{className:"py-2 px-4",children:e.jsxs("span",{className:`px-2 py-1 rounded-2 text-black ${S(s.store_isAuth)}`,children:[s.store_isAuth==="processing"?"處理中":"",s.store_isAuth==="pass"?"通過":"",s.store_isAuth==="rejected"?"已退回":""]})}),e.jsx("td",{className:"py-2 px-4",children:s.store_create_at}),e.jsx("td",{className:"py-2 px-4 text-end",children:e.jsx("button",{className:"edit-btn d-flex align-items-center justify-content-center",children:e.jsx("span",{className:"material-symbols-outlined",children:"edit"})})})]},s.store_id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-4",children:"沒有符合的資料"})})})]})})}),e.jsx("div",{className:"cards-container d-lg-none row row-cols-1 row-cols-md-2 g-3",children:n.length>0?n.map(s=>e.jsx("div",{className:"col",children:e.jsx("div",{className:"card card-admin",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("span",{className:"me-2 px-2 fs-6 rounded-3 bg-secondary-95",style:{fontSize:"0.8rem"},children:["ID: ",s.store_id]}),e.jsx("p",{className:"fw-bold fs-1",children:s.store_name})]}),e.jsx("button",{className:"edit-btn d-flex align-items-center justify-content-center",children:e.jsx("span",{className:"material-symbols-outlined",children:"edit"})})]}),e.jsx("div",{className:"status my-4",children:w(s)}),e.jsxs("div",{className:"content row row-cols-2",children:[e.jsxs("div",{className:"contact d-flex align-items-center",children:[e.jsx("span",{className:"material-symbols-outlined me-1 text-nature-50",children:"person"}),e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("p",{className:"text-nature-50",style:{fontSize:"0.8rem"},children:"聯絡人"}),e.jsx("p",{className:"fw-bold",style:{fontSize:"0.8rem"},children:s.store_contact})]})]}),e.jsxs("div",{className:"tel d-flex align-items-center",children:[e.jsx("span",{className:"material-symbols-outlined me-1 text-nature-50",children:"call"}),e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("p",{className:"text-nature-50",style:{fontSize:"0.8rem"},children:"聯絡電話"}),e.jsx("p",{className:"fw-bold",style:{fontSize:"0.8rem"},children:s.store_self_tel})]})]})]}),e.jsx("div",{className:"text-nature-60",children:e.jsx("hr",{})}),e.jsxs("div",{className:"date d-flex align-items-center",children:[e.jsx("span",{className:"material-symbols-outlined me-1 text-nature-50",children:"calendar_month"}),e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("p",{className:"text-nature-50",style:{fontSize:"0.8rem"},children:"建立時間"}),e.jsx("p",{className:"fw-bold",style:{fontSize:"0.8rem"},children:s.store_create_at})]})]})]})})},s.store_id)):e.jsx("div",{className:"col",children:e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body text-center py-2",children:"沒有符合的資料"})})})})]})})})}const S=l=>{switch(l){case"processing":return"bg-secondary-95";case"pass":return"bg-pass";case"rejected":return"bg-tertiary-90"}},w=l=>{switch(l.store_isAuth){case"processing":return e.jsxs("div",{className:"d-inline-flex align-items-center bg-secondary-95 px-2 rounded-2 border border-secondary-80",style:{height:"26px"},children:[e.jsx("span",{className:"material-symbols-outlined me-1 text-secondary-50",style:{fontSize:"0.8rem"},children:"progress_activity"}),e.jsx("p",{className:"text-secondary-60",style:{fontSize:"0.8rem"},children:"處理中"})]});case"pass":return e.jsxs("div",{className:"d-inline-flex align-items-center bg-pass px-2 rounded-2 border border-success",style:{height:"26px"},children:[e.jsx("span",{className:"material-symbols-outlined me-1 text-success",style:{fontSize:"1rem"},children:"priority"}),e.jsx("p",{className:"text-success",style:{fontSize:"0.8rem"},children:"通過"})]});case"rejected":return e.jsxs("div",{className:"d-inline-flex align-items-center bg-tertiary-90 px-2 rounded-2 border border-primary-80",style:{height:"26px"},children:[e.jsx("span",{className:"material-symbols-outlined me-1 text-danger",style:{fontSize:"1rem"},children:"close_small"}),e.jsx("p",{className:"text-primary-50",style:{fontSize:"0.8rem"},children:"已退回"})]});default:return null}};export{z as default};
