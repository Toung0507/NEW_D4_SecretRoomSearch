import{r as a,j as s,b as C,P as y}from"./index-ClSJhwQF.js";const g="https://new-json.onrender.com";function A({onChange:u,initialAddress:r=""}){var j;const[l,f]=a.useState(""),[h,n]=a.useState(""),[c,o]=a.useState(""),[p,N]=a.useState([]),[i,x]=a.useState(!1),b=async()=>{try{const e=await C.get(`${g}/cities`);N(e.data),x(!1)}catch(e){e.response.data.errors&&x(!0)}},d=(e,t,m)=>{const v=`${e} ${t} ${m}`.trim();u(v)};return a.useEffect(()=>{if(r)if(i)o(r);else{const[e,t,...m]=r.split(" ");f(e||""),n(t||""),o(m.join(" ")||"")}},[r,i]),a.useEffect(()=>{b()},[]),s.jsx("div",{className:"row",children:i?s.jsxs("div",{className:"col",children:[s.jsx("label",{className:"form-label",children:"地址"}),s.jsx("input",{type:"text",className:"form-control",value:c,onChange:e=>{const t=e.target.value;o(t),u(t)},placeholder:"請輸入完整地址"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"col-md-4",children:[s.jsx("label",{className:"form-label fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"縣市"}),s.jsxs("select",{className:"form-select",value:l,onChange:e=>{const t=e.target.value;f(t),n(""),d(t,"",c)},children:[s.jsx("option",{value:"",children:"請選擇縣市"}),p.slice(1).map(e=>s.jsx("option",{value:e.CityName,children:e.CityName},e.city_id))]})]}),s.jsxs("div",{className:"col-md-4",children:[s.jsx("label",{className:"form-label fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"區域"}),s.jsxs("select",{className:"form-select",value:h,onChange:e=>{const t=e.target.value;n(t),d(l,t,c)},disabled:!l,children:[s.jsx("option",{value:"",children:"請選擇區域"}),l&&((j=p.find(e=>e.CityName===l))==null?void 0:j.AreaList.map(e=>s.jsx("option",{value:e.AreaName,children:e.AreaName},e.ZipCode)))]})]}),s.jsxs("div",{className:"col-md-4",children:[s.jsx("label",{className:"form-label fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"詳細地址"}),s.jsx("input",{type:"text",className:"form-control",value:c,onChange:e=>{const t=e.target.value;o(t),d(l,h,t)},placeholder:"請輸入街道、門牌號碼"})]})]})})}A.propTypes={onChange:y.func.isRequired,initialAddress:y.string};export{A};
