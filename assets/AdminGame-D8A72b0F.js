import{r as m,j as e,b as y}from"./index-ClSJhwQF.js";const v="https://new-json.onrender.com";function C(){const[u,N]=m.useState([]),[d,x]=m.useState([]),[h,b]=m.useState({key:"game_id",direction:"asc"}),[t,j]=m.useState({gameName:"",tag:"",is_stock:"全部狀態"});m.useEffect(()=>{(async()=>{try{const a=await y.get(`${v}/gamesData`);N(a.data),x(a.data)}catch(a){console.log(a.response.data.errors[0])}})()},[]);const g=s=>{j({...t,[s.target.id]:s.target.value})},f=()=>{const s=u.filter(a=>{const p=t.gameName===""||a.game_name.toLowerCase().includes(t.gameName.toLowerCase()),l=t.tag===""||a.game_dif_tagname.toLowerCase().includes(t.tag.toLowerCase())||a.game_main_tag1name.toLowerCase().includes(t.tag.toLowerCase())||a.game_main_tag2name.toLowerCase().includes(t.tag.toLowerCase()),n=t.is_stock==="全部狀態"||t.is_stock==="true"&&a.game_isStock===!0||t.is_stock==="false"&&a.game_isStock===!1;return p&&l&&n});x(s)},_=()=>{j({gameName:"",tag:"",is_stock:"全部狀態"}),x(u)},r=s=>{let a="asc";h.key===s&&h.direction==="asc"&&(a="desc"),b({key:s,direction:a});const p=[...d].sort((l,n)=>{if(s==="game_id"||s==="game_score"||s==="game_score_num"){const c=parseFloat(l[s]||0),o=parseFloat(n[s]||0);return a==="asc"?c-o:o-c}if(s==="game_isStock"){const c=!!l[s],o=!!n[s];return a==="asc"?c===o?0:c?1:-1:c===o?0:c?-1:1}return a==="asc"?String(l[s]||"").localeCompare(String(n[s]||"")):String(n[s]||"").localeCompare(String(l[s]||""))});x(p)},i=s=>h.key!==s?e.jsx("div",{}):h.direction==="asc"?e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"18px",position:"absolute",padding:"3px 0"},children:"arrow_upward"}):e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"18px",position:"absolute",padding:"3px 0"},children:"arrow_downward"});return e.jsx("div",{className:"custom-adminBg",children:e.jsxs("div",{className:"adminUser container pt-11 pb-6",children:[e.jsx("nav",{style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",children:e.jsx("ol",{className:"breadcrumb",children:e.jsx("li",{className:"breadcrumb-item",children:e.jsx("span",{className:"fs-Body-2 fw-bold text-nature-50",children:"密室管理"})})})}),e.jsxs("div",{className:"searchBar mt-5 mb-6 row",children:[e.jsxs("div",{className:"col-6 col-lg-2",children:[e.jsx("label",{htmlFor:"gameName",className:"form-label fs-Caption text-black",children:"密室名稱"}),e.jsx("input",{type:"text",className:"form-control bg-transparent border-black",id:"gameName",placeholder:"請輸入內容",value:t.gameName,onChange:g})]}),e.jsxs("div",{className:"col-6 col-lg-2",children:[e.jsx("label",{htmlFor:"tag",className:"form-label fs-Caption text-black",children:"標籤"}),e.jsx("input",{type:"text",className:"form-control bg-transparent border-black",id:"tag",placeholder:"請輸入內容",value:t.tag,onChange:g})]}),e.jsxs("div",{className:"col-6 col-lg-2",children:[e.jsx("label",{htmlFor:"is_stock",className:"form-label fs-Caption text-black",children:"狀態"}),e.jsxs("select",{className:"form-select border-black",id:"is_stock",value:t.is_stock,onChange:g,children:[e.jsx("option",{value:"全部狀態",children:"全部狀態"}),e.jsx("option",{value:"true",children:"上架"}),e.jsx("option",{value:"false",children:"下架"})]})]}),e.jsx("div",{className:"col-lg-1 d-flex align-items-end",children:e.jsx("button",{className:"btn btn-search btn-primary-50 text-white form-control my-3 my-lg-0",onClick:f,children:"搜尋"})}),e.jsx("div",{className:"col-lg-1 d-flex align-items-end",children:e.jsx("button",{className:"btn btn-reset btn-outline-secondary form-control",onClick:_,children:"重置"})})]}),e.jsx("div",{className:"table-container d-none d-lg-block bg-white border rounded-2 border-nature-90 p-6",children:e.jsx("div",{className:"table-scroll-container overflow-scroll",children:e.jsxs("table",{className:"storeTable w-100",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-4 py-3",onClick:()=>r("game_id"),children:["ID ",i("game_id")]}),e.jsxs("th",{className:"px-4 py-3",onClick:()=>r("game_name"),children:["密室名稱 ",i("game_name")]}),e.jsxs("th",{className:"px-4 py-3 text-center",onClick:()=>r("game_score"),children:["評分 ",i("game_score")]}),e.jsxs("th",{className:"px-4 py-3 text-center",onClick:()=>r("game_score_num"),children:["評論人數 ",i("game_score_num")]}),e.jsxs("th",{className:"px-4 py-3",onClick:()=>r("game_dif_tagname"),children:["標籤 ",i("game_dif_tagname")]}),e.jsxs("th",{className:"px-4 py-3 text-center",onClick:()=>r("game_isStock"),children:["狀態 ",i("game_isStock")]})]})}),e.jsx("tbody",{children:d.length>0?d.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-4",children:s.game_id}),e.jsx("td",{className:"py-2 px-4",children:s.game_name}),e.jsx("td",{className:"py-2 px-4 text-center",children:s.game_score}),e.jsx("td",{className:"py-2 px-4 text-center",children:s.game_score_num}),e.jsxs("td",{className:"py-2 px-4",children:[e.jsx("span",{className:"px-2 py-1 rounded-2 text-black bg-nature-95",children:s.game_dif_tagname}),e.jsx("span",{className:"px-2 py-1 mx-2 rounded-2 text-black bg-nature-95",children:s.game_main_tag1name}),e.jsx("span",{className:"px-2 py-1 rounded-2 text-black bg-nature-95",children:s.game_main_tag2name})]}),e.jsx("td",{className:"py-2 px-4 text-center",children:s.game_isStock==!0?e.jsx("span",{className:"px-2 py-1 rounded-2 text-black bg-pass",children:"上架"}):e.jsx("span",{className:"px-2 py-1 rounded-2 text-black bg-tertiary-90",children:"下架"})})]},s.game_id)):e.jsx("tr",{children:e.jsx("td",{className:"text-center py-2",colSpan:6,children:"沒有符合的資料"})})})]})})}),e.jsx("div",{className:"cards-container d-lg-none row row-cols-1 row-cols-md-2 g-3",children:d.length>0?d.map(s=>e.jsx("div",{className:"col",children:e.jsx("div",{className:"card card-admin h-100",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("span",{className:"me-2 px-2 fs-6 rounded-3 bg-secondary-95",style:{fontSize:"0.8rem"},children:["ID: ",s.game_id]}),e.jsx("p",{className:"fw-bold fs-1",children:s.game_name})]}),e.jsx("button",{className:"edit-btn d-flex align-items-center justify-content-center",children:e.jsx("span",{className:"material-symbols-outlined",children:"edit"})})]}),e.jsx("div",{className:"status my-4",children:s.game_isStock?e.jsxs("div",{className:"d-inline-flex align-items-center bg-pass px-2 rounded-2 border border-success",style:{height:"26px"},children:[e.jsx("span",{className:"material-symbols-outlined me-1 text-success",style:{fontSize:"1rem"},children:"check_circle"}),e.jsx("p",{className:"text-success",style:{fontSize:"0.8rem"},children:"上架"})]}):e.jsxs("div",{className:"d-inline-flex align-items-center bg-tertiary-90 px-2 rounded-2 border border-tertiary-80",style:{height:"26px"},children:[e.jsx("span",{className:"material-symbols-outlined me-1 text-tertiary-50",style:{fontSize:"1rem"},children:"cancel"}),e.jsx("p",{className:"text-tertiary-50",style:{fontSize:"0.8rem"},children:"下架"})]})}),e.jsxs("div",{className:"content row row-cols-2",children:[e.jsxs("div",{className:"score d-flex align-items-center",children:[e.jsx("span",{className:"material-symbols-outlined me-1 text-nature-50",children:"star"}),e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("p",{className:"text-nature-50",style:{fontSize:"0.8rem"},children:"評分"}),e.jsx("p",{className:"fw-bold",style:{fontSize:"0.8rem"},children:s.game_score})]})]}),e.jsxs("div",{className:"review-count d-flex align-items-center",children:[e.jsx("span",{className:"material-symbols-outlined me-1 text-nature-50",children:"forum"}),e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("p",{className:"text-nature-50",style:{fontSize:"0.8rem"},children:"評論人數"}),e.jsx("p",{className:"fw-bold",style:{fontSize:"0.8rem"},children:s.game_score_num})]})]})]}),e.jsx("div",{className:"text-nature-60",children:e.jsx("hr",{})}),e.jsxs("div",{className:"tags",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("span",{className:"material-symbols-outlined me-1 text-nature-50",children:"sell"}),e.jsx("p",{className:"text-nature-50",style:{fontSize:"0.8rem"},children:"標籤"})]}),e.jsxs("div",{className:"d-flex flex-wrap gap-1 mt-1",children:[e.jsx("span",{className:"px-2 py-1 rounded-2 text-black bg-nature-95 fs-Caption",children:s.game_dif_tagname}),e.jsx("span",{className:"px-2 py-1 rounded-2 text-black bg-nature-95 fs-Caption",children:s.game_main_tag1name}),e.jsx("span",{className:"px-2 py-1 rounded-2 text-black bg-nature-95 fs-Caption",children:s.game_main_tag2name})]})]})]})})},s.game_id)):e.jsx("div",{className:"col",children:e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body text-center py-4",children:"沒有符合的資料"})})})})]})})}export{C as default};
