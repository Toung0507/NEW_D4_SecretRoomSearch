import{G as X,a as oe,r as a,M as U,j as e,b as F,p as P,o as ne,g as ce,L as p,c as ie,d as me}from"./index-ClSJhwQF.js";import{c as L,e as he,d as q}from"./createContent-Ph1Dm0B6.js";import{u as K}from"./index.esm-FjSWrlUs.js";import{A as Q}from"./AddressForm-DNOkE71s.js";import{T as xe}from"./Toast-yiv-wyuv.js";import{S as R,I as z}from"./SmallLoadingSpinner-LIJKS5n4.js";function pe(n){return X({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M8.6 1c1.6.1 3.1.9 4.2 2 1.3 1.4 2 3.1 2 5.1 0 1.6-.6 3.1-1.6 4.4-1 1.2-2.4 2.1-4 2.4-1.6.3-3.2.1-4.6-.7-1.4-.8-2.5-2-3.1-3.5C.9 9.2.8 7.5 1.3 6c.5-1.6 1.4-2.9 2.8-3.8C5.4 1.3 7 .9 8.6 1zm.5 12.9c1.3-.3 2.5-1 3.4-2.1.8-1.1 1.3-2.4 1.2-3.8 0-1.6-.6-3.2-1.7-4.3-1-1-2.2-1.6-3.6-1.7-1.3-.1-2.7.2-3.8 1-1.1.8-1.9 1.9-2.3 3.3-.4 1.3-.4 2.7.2 4 .6 1.3 1.5 2.3 2.7 3 1.2.7 2.6.9 3.9.6zM7.9 7.5L10.3 5l.7.7-2.4 2.5 2.4 2.5-.7.7-2.4-2.5-2.4 2.5-.7-.7 2.4-2.5-2.4-2.5.7-.7 2.4 2.5z"},child:[]}]})(n)}function ue(n){return X({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 56C145.72 56 56 145.72 56 256s89.72 200 200 200 200-89.72 200-200S366.28 56 256 56zm0 82a26 26 0 1 1-26 26 26 26 0 0 1 26-26zm48 226h-88a16 16 0 0 1 0-32h28v-88h-16a16 16 0 0 1 0-32h32a16 16 0 0 1 16 16v104h28a16 16 0 0 1 0 32z"},child:[]}]})(n)}const Y="https://new-json.onrender.com",je=()=>{const n=oe(),{user:d,store:t}=a.useContext(L),{register:N,handleSubmit:g,formState:{errors:m},setValue:y}=K(),{register:b,handleSubmit:D,formState:{errors:r},setValue:c,watch:A}=K(),i=A("store_method"),G=a.useRef(null),u=a.useRef(null),k=a.useRef(null),o=a.useRef(null),[M,s]=a.useState("尚未驗證"),[v,B]=a.useState({store_name:t.store_name,store_address:t.store_address,store_email:t.store_email,store_tel:t.store_tel}),[x,T]=a.useState({user_name:d==null?void 0:d.user_name,user_email:d==null?void 0:d.user_email,user_tel:d==null?void 0:d.user_tel,store_self_address:t.store_self_address,store_contact:t.store_contact,store_method:t.store_method,store_tax_id:t.store_tax_id,store_documentation:t.store_documentation,store_website:t.store_website}),[w,V]=a.useState(!1),[H,Z]=a.useState(!1),ee=D(l=>{const j=t.store_id,_=d.user_id,{userData:h,storeData:S}=Object.entries(l).reduce((C,[f,I])=>(f.startsWith("user_")?C.userData[f]=I:f.startsWith("store_")&&(C.storeData[f]=I),C),{userData:{},storeData:{}}),O=async C=>{C.store_update_at=q().format("YYYY-MM-DD HH:mm:ss");try{await F.patch(`${Y}/storesData/${j}`,C)}catch(f){const I=f.response.data;n(P({text:I,status:"failed"}))}},de=async C=>{C.user_update_at=q().format("YYYY-MM-DD HH:mm:ss");try{await F.patch(`${Y}/usersData/${_}`,C);try{const f=await F.get(`${Y}/usersData/${_}`);n(ne(f.data))}catch(f){const I=f.response.data;n(P({text:I,status:"failed"}))}}catch(f){const I=f.response.data;n(P({text:I,status:"failed"}))}};H&&(O(S),de(h),T(l),Z(!1))}),$=l=>{const{name:j,value:_}=l.target;j==="store_method"&&c("store_method",_),T(h=>{const S={...h,[j]:_};return Z(JSON.stringify(S)!==JSON.stringify(x)),S})},se=g(l=>{const j=t.store_id;w&&(async h=>{h.store_update_at=q().format("YYYY-MM-DD HH:mm:ss");try{await F.patch(`${Y}/storesData/${j}`,h),B(h),V(!1)}catch(S){const O=S.response.data;n(P({text:O,status:"failed"}))}})(l)}),E=l=>{const{name:j,value:_}=l.target;B(h=>{const S={...h,[j]:_};return V(JSON.stringify(S)!==JSON.stringify(v)),S})},te=async()=>{const l=d.user_email,j=k.current.value,h=await n(ce({user_email:l,user_password:j}));h.meta.requestStatus==="fulfilled"?(le(),J(),s("請輸入新密碼"),k.current.value=""):s(h.payload==="信箱及密碼需要輸入"||h.payload==="密碼請超過4碼"?"請輸入密碼驗證或密碼未超過4碼":h.payload)},ae=async()=>{const l=o.current.value,j={user_password:l},_=d.user_id;if(l===""||l.length<4)s("新密碼需超過4碼");else{j.user_update_at=q().format("YYYY-MM-DD HH:mm:ss");try{await F.patch(`${Y}/usersData/${_}`,j),n(P({text:`修改密碼成功
請下次登入使用新密碼`,status:"success"})),s("尚未驗證"),o.current.value="",setTimeout(()=>{W()},1e3)}catch(h){console.log(h.response.data.errors[0]),s("請連繫後台管理者做修改密碼"),n(P({text:"修改密碼失敗",status:"error"}))}}},re=()=>{U.getInstance(G.current).show()},J=()=>{U.getInstance(G.current).hide()},le=()=>{U.getInstance(u.current).show()},W=()=>{U.getInstance(u.current).hide()};return a.useEffect(()=>{new U(G.current,{backdrop:!1}),new U(u.current,{backdrop:!1})},[]),a.useEffect(()=>{c("store_method",x.store_method)},[i,c,x.store_method]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-lg-8 m-0 py-sm-10 px-0 ",children:[e.jsxs("div",{className:"border-nature-90 border rounded-2",children:[e.jsx("div",{className:"BasicStoreInfoTitle fs-h6 lh-sm bg-secondary-95 fw-bold px-5 py-5 text-secondary-50",children:"基本資料"}),e.jsxs("div",{className:"user-info bg-white ",children:[e.jsxs("div",{className:"user_name d-flex px-6 py-sm-5 py-4 align-items-center border-nature-90 border-1 border-top border-bottom",children:[e.jsx("img",{src:t.store_isAuth==="processing"?"./icon/processingStore.png":t.store_isAuth==="pass"?"./icon/passStore.png":"./icon/rejectedStore.png",alt:d==null?void 0:d.user_name,className:"rounded-circle",style:{width:"10%",objectFit:"cover",aspectRatio:"1/1"}}),e.jsxs("p",{className:"ps-5 fw-bold fs-h6",children:[d==null?void 0:d.user_name,e.jsx("span",{className:"fs-Body-2 fs-lg-h6",children:t.store_isAuth==="processing"?e.jsxs("span",{className:"text-secondary-40",children:[e.jsx(ue,{className:"ms-3 me-1"})," ","發布遊戲資格審核中"]}):t.store_isAuth==="pass"?e.jsxs("span",{className:"text-success",children:[e.jsx(he,{className:"ms-3 me-1"})," ","審核成功，可新增遊戲"]}):e.jsxs("span",{className:"text-danger",children:[e.jsx(pe,{className:"ms-3 me-1"})," ","資格審核失敗，請再次確認相關資訊，才可發布遊戲"]})})]})]}),e.jsx("div",{className:"user_information p-6 ",children:e.jsxs("form",{className:"text-start",onSubmit:ee,id:"storeUserData",children:[e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"user_name",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"店家名稱"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...b("user_name",{required:"店家名稱欄位必填"}),type:"text",className:`form-control ${r.user_name&&"is-invalid"}`,id:"user_name",name:"user_name",placeholder:"請輸入店家名稱",value:x.user_name,onChange:$}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:r.user_name?r.user_name.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"user_email",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"登入信箱"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...b("user_email",{required:"信箱欄位必填",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"請輸入有效的 Email 格式，如 example@mail.com"}}),type:"text",className:`form-control ${r.user_email&&"is-invalid"}`,id:"user_email",name:"user_email",placeholder:"請輸入聯絡信箱",value:x.user_email,onChange:$}),e.jsx("button",{className:"text-secondary-50 bg-transparent border-0 border-bottom pt-1 ",onClick:re,children:"修改密碼"}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:r.user_email?r.user_email.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"user_tel",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"聯絡人電話"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...b("user_tel",{required:"電話欄位必填",pattern:{value:/^(0[2-8]-\d{7,8}|09\d{8})$/,message:"市話格式為02-12345678手機格式為0912456789"}}),type:"text",className:`form-control ${r.user_tel&&"is-invalid"}`,id:"user_tel",name:"user_tel",placeholder:"請輸入電話",value:x.user_tel,onChange:$}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:r.user_tel?r.user_tel.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"store_contact",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"聯絡人"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...b("store_contact",{required:"聯絡人欄位必填"}),type:"text",className:`form-control ${r.store_contact&&"is-invalid"}`,id:"store_contact",name:"store_contact",placeholder:"請輸入聯絡信箱",value:x.store_contact,onChange:$}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:r.store_contact?r.store_contact.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"store_self_address",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"公司地址"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx(Q,{onChange:l=>{c("store_self_address",l),$({target:{name:"store_self_address",value:l}})},initialAddress:t.store_self_address}),e.jsx("label",{className:"mt-1 mb-0",children:"以下為完整地址自動帶入，無法修改"}),e.jsx("input",{...b("store_self_address",{required:"請填寫完整地址"}),type:"text",className:`form-control mt-2 ${r.store_self_address?"is-invalid":""}`,id:"store_self_address",name:"store_self_address",placeholder:"完整地址將自動填入",value:x.store_self_address,readOnly:!0}),e.jsx("div",{className:"error-message text-danger mt-1",children:r.store_self_address?r.store_self_address.message:"　"})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("label",{htmlFor:"store_method",className:"col-sm-2 col-form-label fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"驗證方式"}),e.jsxs("div",{className:"col-sm-5",children:[e.jsxs("select",{className:`form-select ${r.store_method&&"is-invalid"}`,"aria-label":"Default select example",...b("store_method",{required:"驗證方式必選",validate:l=>l!=="請選擇驗證方式"||"請選擇驗證方式"}),value:x.store_method,onChange:$,children:[e.jsx("option",{defaultValue:!0,value:"請選擇驗證方式",children:"請選擇驗證方式"}),e.jsx("option",{value:"統一編號",children:"有統一編號，請輸入統一編號"}),e.jsx("option",{value:"其他",children:"無統編，請提供其餘可證明資料"})]}),e.jsx("div",{className:"error-message text-danger mt-1",children:r.store_method?r.store_method.message:"　"})]}),e.jsxs("div",{className:"col-sm-5",children:[i&&(i==="請選擇驗證方式"||i===""||i===void 0)&&e.jsx("input",{type:"text",className:"form-control",disabled:!0}),i&&i==="統一編號"&&e.jsx("input",{...b("store_tax_id",{required:"統一編號欄位必填",minLength:{value:8,message:"統一編號格式錯誤"}}),type:"text",className:`form-control ${r.store_tax_id&&"is-invalid"}`,id:"store_tax_id",name:"store_tax_id",placeholder:"請填入公司統一編號",value:x.store_tax_id,onChange:$}),i&&i==="其他"&&e.jsx("input",{...b("store_documentation",{required:"其餘證明文件欄位必填"}),type:"url",className:`form-control ${r.store_documentation&&"is-invalid"}`,id:"store_documentation",name:"store_documentation",placeholder:"請將其他證明文件上傳到雲端硬碟，並放上共用連結",value:x.store_documentation,onChange:$}),e.jsxs("div",{className:"error-message text-danger mt-1",children:[r.store_tax_id?r.store_tax_id.message:"　",r.store_documentation?r.store_documentation.message:"　"]})]})]})]})}),e.jsx("div",{className:"ps-6 py-4 border-nature-90 border-1 border-top",children:e.jsxs("div",{className:"btn_2 d-flex  text-center ",children:[e.jsx("button",{type:"reset",className:"btn bg-nature-60 text-white me-6",disabled:!H,form:"storeUserData",children:"取消更改"}),e.jsx("button",{type:"submit",className:"btn bg-secondary-60 text-white",form:"storeUserData",disabled:!H,children:"儲存變更"})]})})]})]}),e.jsx(xe,{})]}),e.jsx("div",{className:"col-lg-8  m-0 px-0 mt-5 mb-10 mt-sm-0",children:e.jsxs("div",{className:"border-nature-90 border rounded-2",children:[e.jsxs("div",{className:"BasicStoreInfoTitle fs-h6 lh-sm bg-secondary-95 fw-bold px-5 py-5 text-secondary-50",children:["場館資料(以下為提供給訪客的資訊)",e.jsxs("p",{className:"fs-Body-1 mt-1 text-black fw-normal",children:[e.jsx("span",{className:"text-danger",children:"*"})," 代表可在不同密室上進行更改"]})]}),e.jsxs("div",{className:"user-info bg-white ",children:[e.jsx("div",{className:"user_information p-6 ",children:e.jsxs("form",{className:"text-start",onSubmit:se,id:"storeData",children:[e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"store_name",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"店家名稱"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...N("store_name",{required:"店家名稱欄位必填"}),type:"text",className:`form-control ${m.store_name&&"is-invalid"}`,id:"store_name",name:"store_name",placeholder:"請輸入店家名稱",value:v.store_name,onChange:E}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:m.store_name?m.store_name.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"store_address",className:"col-sm-2 custom-labelRequired fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"店家地址"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx(Q,{onChange:l=>{y("store_address",l),E({target:{name:"store_address",value:l}})},initialAddress:t.store_address}),e.jsx("label",{className:"mt-1 mb-0",children:"以下為完整地址自動帶入，無法修改"}),e.jsx("input",{...N("store_address",{required:"請填寫完整地址"}),type:"text",className:`form-control mt-2 ${m.store_address?"is-invalid":""}`,id:"store_address",name:"store_address",placeholder:"完整地址將自動填入",value:v.store_address,readOnly:!0}),e.jsx("div",{className:"error-message text-danger mt-1",children:m.store_address?m.store_address.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"store_email",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"聯絡信箱"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...N("store_email",{required:"聯絡信箱欄位必填",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"請輸入有效的 Email 格式，如 example@mail.com"}}),type:"text",className:`form-control ${m.store_email&&"is-invalid"}`,id:"store_email",name:"store_email",placeholder:"請輸入聯絡信箱",value:v.store_email,onChange:E}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:m.store_email?m.store_email.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"store_tel",className:"col-sm-2",children:"電話"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...N("store_tel",{required:"電話欄位必填",pattern:{value:/^(0[2-8]-\d{7,8}|09\d{8})$/,message:"市話格式為02-12345678手機格式為0912456789"}}),type:"text",className:`form-control ${m.store_tel&&"is-invalid"}`,id:"store_tel",name:"store_tel",placeholder:"請輸入電話",value:v.store_tel,onChange:E}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:m.store_tel?m.store_tel.message:"　"})]})]})]})}),e.jsx("div",{className:"ps-6 py-4 border-nature-90 border-1 border-top",children:e.jsxs("div",{className:"btn_2 d-flex  text-center ",children:[e.jsx("button",{type:"reset",className:"btn bg-nature-60 text-white me-6",disabled:!w,form:"storeData",children:"取消更改"}),e.jsx("button",{type:"submit",className:"btn bg-secondary-60 text-white",form:"storeData",disabled:!w,children:"儲存變更"})]})})]})]})}),e.jsx("div",{ref:G,className:"modal fade m-0",id:"updatePawwordModal",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-secondary-95 flex-column align-items-start",children:[e.jsx("h4",{className:"modal-title fw-bold mb-2",children:"修改密碼"}),e.jsx("p",{children:"請先輸入目前密碼進行驗證"})]}),e.jsxs("div",{className:"modal-body px-5 py-10",children:[e.jsx("input",{type:"password",className:"w-100 border border-1 border-black rounded-1 ",ref:k}),e.jsx("div",{className:`error-message ${M==="尚未驗證"?"text-secondary-40":"text-danger"}  mt-1 fs-caption lh-1`,children:M})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"btn_2 d-flex  text-center ",children:[e.jsx("button",{type:"button",className:"btn bg-nature-60 text-white me-6",onClick:J,children:"取消更改"}),e.jsx("button",{type:"button",className:"btn bg-secondary-60 text-white",onClick:te,children:"下一步"})]})})]})})}),e.jsx("div",{ref:u,className:"modal fade m-0",id:"updatePawwordModal",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header bg-secondary-95",children:e.jsx("h4",{className:"modal-title fw-bold ",children:"修改密碼"})}),e.jsxs("div",{className:"modal-body px-6 py-10",children:[e.jsx("input",{type:"password",className:"w-100 border border-1 border-black rounded-1 ",ref:o}),e.jsx("div",{className:`error-message ${M==="尚未驗證"?"text-secondary-40":"text-danger"}  mt-1 fs-caption lh-1`,children:M})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"btn_2 d-flex  text-center ",children:[e.jsx("button",{type:"button",className:"btn bg-nature-60 text-white me-6",onClick:W,children:"取消更改"}),e.jsx("button",{type:"button",className:"btn bg-secondary-60 text-white",onClick:ae,children:"儲存變更"})]})})]})})})]})},be="https://new-json.onrender.com",fe=()=>{const{store:n}=a.useContext(L),d=n.store_id,[t,N]=a.useState([]),[g,m]=a.useState([]),[y,b]=a.useState(!0),[D,r]=a.useState(!0),[c,A]=a.useState(!1),[i,G]=a.useState("upGames"),[u,k]=a.useState(""),[o,M]=a.useState(!0);return a.useEffect(()=>{(async()=>{var x;n.store_isAuth!=="pass"?A(!1):n.store_isAuth==="pass"&&A(!0);let v=[],B=[];try{(await F.get(`${be}/storesData/${d}/gamesData`)).data.map(w=>{w.game_isStock?v.push(w):B.push(w)}),k(null)}catch(T){const w=(x=T.response.data)!=null&&x.errors[0]?"取得此店家的全部遊戲資料失敗，請聯繫管理者":"";k(w)}finally{M(!1)}v.length===0?b(!1):N(v),B.length===0?r(!1):m(B)})()},[n.store_isAuth,d]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"m-0 pt-10 px-0 d-none d-lg-block ",children:[e.jsxs("div",{className:"border-nature-90 border rounded-2",children:[e.jsx("div",{className:"custom-userGroupTitle lh-normal bg-secondary-95 px-6 py-5 text-secondary-50 fw-bold fs-h6",children:"已上架"}),e.jsx("div",{className:"p-6 bg-white",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-light px-3",children:e.jsxs("tr",{className:"border-bottom border-nature-95 ",children:[e.jsx("th",{scope:"col",className:"text-secondary-40 ps-6 py-3 pe-0",children:"密室名稱"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"密室地點"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"開幕日期"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"最低價格"}),e.jsx("th",{scope:"col",className:"text-secondary-40 pe-6 py-3 ps-0",children:"人數上限"}),e.jsx("th",{scope:"col",className:"text-secondary-40 pe-6 py-3 ps-0"})]})}),e.jsxs("tbody",{children:[o&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-1",children:e.jsx(R,{message:"載入遊戲中"})})}),!o&&u&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6",children:e.jsx("p",{children:u})})}),!o&&c===!1&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6 bg-white py-2",children:e.jsx("p",{children:"尚未驗證成功，請先驗證"})})}),!o&&c&&y&&t.length>0&&e.jsxs(e.Fragment,{children:[t.map(s=>e.jsxs("tr",{className:"border-bottom border-nature-95",children:[e.jsx("td",{className:"ps-5 py-2 pe-0",children:s.game_name}),e.jsx("td",{className:"py-2 px-0",children:s.game_address}),e.jsx("td",{className:"py-2 px-0",children:s.game_start_date}),e.jsxs("td",{className:"py-2 px-0",children:[s.game_min_price,"元起"]}),e.jsxs("td",{className:"py-2 px-0",children:[s.game_maxNum_Players,"人"]}),e.jsx("td",{className:"pe-5 py-2 ps-0",children:e.jsxs(p,{to:`/Game_content/${s.game_id}`,className:"text-black",children:["查看詳情 ",e.jsx(z,{color:"black"})]})})]},s.game_id)),e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6",children:e.jsx("p",{children:e.jsx(p,{className:"d-inline text-nowrap",to:"/AddGames",children:"新增密室資訊"})})})})]}),!o&&c&&t.length==0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6",children:e.jsxs("p",{children:["沒有發布任何遊戲",e.jsx("br",{}),e.jsx(p,{className:"d-inline text-nowrap",to:"/AddGames",children:"新增密室資訊"}),"提供給使用者吧!"]})})})]})]})})]}),e.jsxs("div",{className:"border-nature-90 border rounded-2 my-10",children:[e.jsx("div",{className:"custom-userGroupTitle lh-normal bg-secondary-95 px-6 py-5 text-secondary-50 fw-bold fs-h6",children:"等待上架"}),e.jsx("div",{className:"p-6 bg-white",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-light px-3",children:e.jsxs("tr",{className:"border-bottom border-nature-95 ",children:[e.jsx("th",{scope:"col",className:"text-secondary-40 ps-6 py-3 pe-0",children:"密室名稱"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"密室地點"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"開幕日期"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"最低價格"}),e.jsx("th",{scope:"col",className:"text-secondary-40 pe-6 py-3 ps-0",children:"人數上限"}),e.jsx("th",{scope:"col",className:"text-secondary-40 pe-6 py-3 ps-0"})]})}),e.jsxs("tbody",{children:[o&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-1",children:e.jsx(R,{message:"載入遊戲中"})})}),!o&&u&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6",children:e.jsx("p",{children:u})})}),!o&&c===!1&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6 bg-white py-2",children:e.jsx("p",{children:"尚未驗證成功，請先驗證"})})}),!o&&c&&D&&g.length>0&&e.jsxs(e.Fragment,{children:[g.map(s=>e.jsxs("tr",{className:"border-bottom border-nature-95",children:[e.jsx("td",{className:"ps-5 py-2 pe-0",children:s.game_name}),e.jsx("td",{className:"py-2 px-0",children:s.game_address}),e.jsx("td",{className:"py-2 px-0",children:s.game_start_date}),e.jsx("td",{className:"py-2 px-0",children:s.game_min_price}),e.jsxs("td",{className:"py-2 px-0",children:[s.game_maxNum_Players,"人"]}),e.jsx("td",{className:"pe-5 py-2 ps-0",children:e.jsxs(p,{to:`/AddGames/${s.game_id}`,className:"text-black",children:["編輯表單 ",e.jsx(z,{color:"black"})]})})]},s.game_id)),e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6",children:e.jsx("p",{children:e.jsx(p,{className:"d-inline text-nowrap",to:"/AddGames",children:"新增密室資訊"})})})})]}),!o&&c&&g.length==0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6",children:e.jsxs("p",{children:["未有任何密室審核中，",e.jsx("br",{}),e.jsx(p,{className:"d-inline text-nowrap",to:"/AddGames",children:"新增密室資訊"}),"提供給使用者吧！"]})})})]})]})})]})]}),e.jsxs("div",{className:"m-0 d-block d-lg-none",children:[e.jsxs("div",{className:"d-flex m-0 pt-5 ps-3 pb-3",children:[e.jsx("button",{className:`  btn border-1 border-secondary-50 me-3  fw-bold rounded-16 ${i==="upGames"?"bg-secondary-50 text-secondary-99":"text-secondary-50"}`,onClick:()=>G("upGames"),children:"已上架"}),e.jsx("button",{className:`  btn border-1 border-secondary-50 rounded-16 fw-bold ${i==="downGames"?"bg-secondary-50 text-secondary-99":"text-secondary-50"}`,onClick:()=>G("downGames"),children:"等待上架"})]}),i==="upGames"&&e.jsxs("div",{className:"",children:[e.jsx("div",{className:"custom-userGroupTitle lh-normal bg-secondary-95 px-4 py-5 text-secondary-50 fw-bold fs-h6",children:"已上架"}),e.jsxs("div",{className:" ",children:[o&&e.jsx("dl",{children:e.jsx("dt",{className:"text-center fs-h6 bg-white py-2",children:e.jsx(R,{message:"載入遊戲中"})})}),!o&&u&&e.jsx("dl",{children:e.jsx("dt",{className:"text-center fs-h6 bg-white py-2",children:e.jsx("p",{children:u})})}),!o&&c===!1&&e.jsx(e.Fragment,{children:e.jsx("dl",{children:e.jsx("dt",{className:"text-center fs-h6 bg-white py-2",children:"尚未驗證成功，請先驗證"})})}),!o&&c&&y&&t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center bg-white my-2",children:e.jsx(p,{className:"d-inline text-nowrap",to:"/AddGames",children:"新增密室資訊"})}),t.map(s=>e.jsxs("dl",{className:"mb-4 bg-white p-4",children:[e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"密室名稱"}),e.jsx("dd",{children:s.game_name}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"密室地點"}),e.jsx("dd",{children:s.game_address}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"開幕日期"}),e.jsx("dd",{children:s.game_start_date}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"最低價格"}),e.jsxs("dd",{children:[s.game_min_price,"元起"]}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"人數上限"}),e.jsxs("dd",{className:"mb-3",children:[s.game_maxNum_Players,"人"]}),e.jsx("dd",{className:"py-1 m-0",children:e.jsxs(p,{to:`/Game_content/${s.game_id}`,className:"text-black",children:["查看詳情 ",e.jsx(z,{color:"black"})]})})]},s.game_id))]}),!o&&c&&t.length==0&&e.jsx(e.Fragment,{children:e.jsx("dl",{children:e.jsx("dt",{className:"text-center fs-h6 bg-white",children:e.jsxs("p",{children:["未有任何密室審核中，",e.jsx("br",{}),e.jsx(p,{className:"d-inline text-nowrap",to:"/AddGames",children:"新增密室資訊"}),"提供給使用者吧！"]})})})})]})]}),i==="downGames"&&e.jsxs("div",{className:"",children:[e.jsx("div",{className:"custom-userGroupTitle lh-normal bg-secondary-95 px-4 py-5 text-secondary-50 fw-bold fs-h6",children:"等待上架"}),e.jsxs("div",{className:" ",children:[o&&e.jsx("dl",{children:e.jsx("dt",{className:"text-center fs-h6 bg-white py-2",children:e.jsx(R,{message:"載入遊戲中"})})}),!o&&u&&e.jsx("dl",{children:e.jsx("dt",{className:"text-center fs-h6 bg-white py-2",children:e.jsx("p",{children:u})})}),!o&&c===!1&&e.jsx(e.Fragment,{children:e.jsx("dl",{children:e.jsx("dt",{className:"text-center fs-h6 bg-white py-2",children:"尚未驗證成功，請先驗證"})})}),!o&&c&&D&&g.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center bg-white my-2",children:e.jsx(p,{className:"d-inline text-nowrap",to:"/AddGames",children:"新增密室資訊"})}),g.map(s=>e.jsxs("dl",{className:"mb-4 bg-white p-4",children:[e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"密室名稱"}),e.jsx("dd",{children:s.game_name}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"密室地點"}),e.jsx("dd",{children:s.game_address}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"開幕日期"}),e.jsx("dd",{children:s.game_start_date}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"最低價格"}),e.jsxs("dd",{children:[s.game_min_price,"元起"]}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"人數上限"}),e.jsxs("dd",{className:"mb-3",children:[s.game_maxNum_Players,"人"]}),e.jsx("dd",{children:e.jsxs(p,{to:`/AddGames/${s.game_id}`,className:"text-black",children:["編輯表單 ",e.jsx(z,{color:"black"})]})})]},s.game_id))]}),!o&&c&&g.length==0&&e.jsx(e.Fragment,{children:e.jsx("dl",{children:e.jsx("dt",{className:"text-center fs-h6 bg-white",children:e.jsxs("p",{children:["未有任何密室審核中，",e.jsx("br",{}),e.jsx(p,{className:"d-inline text-nowrap",to:"/AddGames",children:"新增密室資訊"}),"提供給使用者吧！"]})})})})]})]})]})]})},_e="https://new-json.onrender.com";function Ce(){const{user:n,user_token:d}=ie(i=>i.userInfo),{user_id:t,activedefaultTab:N}=me(),[g,m]=a.useState(!1),[y,b]=a.useState(N),[D,r]=a.useState({}),c=a.useCallback(()=>{d&&Number(t)===Number(n.user_id)?m(!0):m(!1)},[d,n==null?void 0:n.user_id,t]),A=a.useCallback(async()=>{try{const i=await F.get(`${_e}/usersData/${t}/storesData`);r(i.data[0])}catch(i){console.log(i.response.data.errors[0])}},[t]);return a.useEffect(()=>{A()},[A]),a.useEffect(()=>{c(),b(N)},[t,N,c]),e.jsx(e.Fragment,{children:g?e.jsxs("div",{className:"custom-profileMain flex-grow-1",children:[e.jsx("div",{className:"container-fluid bg-primary-99",children:e.jsx("div",{className:"container-lg ",children:e.jsx("div",{className:"row pt-10 ",children:e.jsxs("ul",{className:"d-flex",children:[e.jsx("li",{className:"",children:e.jsx(p,{className:`custom-profileTab fs-lg-h6 fs-Body-1 lh-base lh-lg-normal fw-bold ${y==="basicStoreInfo"?"active":""} `,to:`/Store_profile/${t}/basicStoreInfo`,children:"基本資訊"})}),e.jsx("li",{className:"",children:e.jsx(p,{className:`custom-profileTab fs-lg-h6 fs-Body-1 lh-base lh-lg-normal fw-bold ${y==="myGames"?"active":""} `,to:`/Store_profile/${t}/myGames`,children:"密室總覽"})})]})})})}),e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"container-lg",children:e.jsx("div",{className:"row m-0 flex-column flex-md-row g-5 justify-content-center align-items-center",children:e.jsxs(L.Provider,{value:{user:n,store:D},children:[Object.keys(D).length>0&&y==="basicStoreInfo"&&e.jsx(je,{}),Object.keys(D).length>0&&y==="myGames"&&e.jsx(fe,{})]})})})})]}):e.jsx("div",{className:"my-md-10 my-sm-0",children:e.jsx("div",{className:"container-lg",children:e.jsx("div",{className:"row flex-column flex-md-row g-0",children:e.jsx("p",{className:"h1 text-center",children:"尚未登入，或此頁面非您的會員ID"})})})})})}export{Ce as default};
