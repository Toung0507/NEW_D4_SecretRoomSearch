import{a as O,r as t,M as w,j as e,b as k,o as L,p as T,g as q,L as v,c as J,d as z}from"./index-ClSJhwQF.js";import{u as K}from"./index.esm-FjSWrlUs.js";import{u as M,b as Q,d as G}from"./createContent-Ph1Dm0B6.js";import{a as V}from"./index-BkwD1FHV.js";import{T as Y}from"./Toast-yiv-wyuv.js";import{S as B,I as U}from"./SmallLoadingSpinner-LIJKS5n4.js";import{T as W,a as X}from"./index-uTDT1y4d.js";const A="https://new-json.onrender.com",Z=()=>{const x=O(),{register:u,handleSubmit:j,formState:{errors:d}}=K(),{user:c}=t.useContext(M),[f,b]=t.useState(c),[g,N]=t.useState(!1),[h,y]=t.useState("尚未驗證"),_=t.useRef(null),n=t.useRef(null),o=t.useRef(null),a=t.useRef(null),C=j(s=>{const i=c.user_id;g&&(async r=>{r.user_update_at=G().format("YYYY-MM-DD HH:mm:ss");try{await k.patch(`${A}/usersData/${i}`,r);try{const S=await k.get(`${A}/usersData/${i}`);x(L(S.data)),N(!1)}catch(S){const R=S.response.data;x(T({text:R,status:"failed"}))}}catch(S){const R=S.response.data;x(T({text:R,status:"failed"}))}})(s)}),p=s=>{const{name:i,value:m}=s.target;b(r=>{const S={...r,[i]:m};return N(JSON.stringify(S)!==JSON.stringify(f)),S})},I=async()=>{const s=c.user_email,i=o.current.value,r=await x(q({user_email:s,user_password:i}));r.meta.requestStatus==="fulfilled"?(F(),D(),y("請輸入新密碼"),o.current.value=""):y(r.payload==="信箱及密碼需要輸入"||r.payload==="密碼請超過4碼"?"請輸入密碼驗證或密碼未超過4碼":r.payload)},l=async()=>{const s=a.current.value,i={user_password:s},m=c.user_id;if(s===""||s.length<4)y("新密碼需超過4碼");else{i.user_update_at=G().format("YYYY-MM-DD HH:mm:ss");try{await k.patch(`${A}/usersData/${m}`,i),x(T({text:`修改密碼成功
下次登入請使用新密碼`,status:"success"})),y("尚未驗證"),a.current.value="",setTimeout(()=>{$()},1e3)}catch(r){console.log(r.response.data.errors[0]),y("請連繫後台管理者做修改密碼"),x(T({text:"修改密碼失敗",status:"error"}))}}},P=()=>{w.getInstance(_.current).show()},D=()=>{w.getInstance(_.current).hide()},F=()=>{w.getInstance(n.current).show()},$=()=>{w.getInstance(n.current).hide()};return t.useEffect(()=>{new w(_.current,{backdrop:!1}),new w(n.current,{backdrop:!1})},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-lg-8 m-0 py-sm-10 px-0 ",children:[e.jsxs("div",{className:" border-nature-90 border-1 border",children:[e.jsx("div",{className:"fs-h6 lh-sm bg-secondary-95 fw-bold px-5 py-6 text-secondary-50",children:"會員資料"}),e.jsxs("div",{className:"user-info bg-white ",children:[e.jsxs("div",{className:"user_name d-flex px-6 py-sm-5 py-4 align-items-center border-nature-90 border-1 border-top border-bottom",children:[e.jsx("img",{src:(c==null?void 0:c.user_sex)==="男"?"./icon/man.png":(c==null?void 0:c.user_sex)==="女"?"./icon/woman.png":"./icon/user.png",alt:c==null?void 0:c.user_name,className:"rounded-circle",style:{width:"14%",objectFit:"cover",aspectRatio:"1/1"}}),e.jsx("h5",{className:"ps-5 fw-bold",children:c==null?void 0:c.user_name})]}),e.jsx("div",{className:"user_information p-6 ",children:e.jsxs("form",{className:"text-start",onSubmit:C,id:"userinfoform",children:[e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"user_name",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"姓名"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...u("user_name",{required:"姓名欄位必填"}),type:"text",className:`form-control ${d.user_name&&"is-invalid"}`,id:"user_name",name:"user_name",placeholder:"請輸入姓名或暱稱",value:f.user_name,onChange:p}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:d.user_name?d.user_name.message:"　"})]})]}),e.jsxs("div",{className:"row  mb-1",children:[e.jsx("label",{htmlFor:"user_email",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"信箱"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...u("user_email",{required:"信箱欄位必填"}),type:"email",className:"form-control",id:"user_email",name:"user_email",value:f.user_email,onChange:p}),e.jsx("button",{className:"text-secondary-50 bg-transparent border-0 border-bottom pt-1 ",onClick:P,children:"修改密碼"}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:d.user_email?d.user_email.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"user_sex",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"性別"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsxs("select",{className:`form-select ${d.user_sex&&"is-invalid"}`,"aria-label":"Default select example",...u("user_sex",{required:"性別欄位必填",validate:s=>s!=="請選擇性別"||"請選擇性別"}),value:f.user_sex,onChange:p,children:[e.jsx("option",{value:"請選擇性別",children:"請選擇性別"}),e.jsx("option",{value:"男",children:"男"}),e.jsx("option",{value:"女",children:"女"}),e.jsx("option",{value:"不提供",children:"不提供"})]}),e.jsx("div",{className:"error-message text-danger mt-1 fs-caption lh-1",children:d.user_email?d.user_email.message:"　"})]})]}),e.jsxs("div",{className:"row mb-1",children:[e.jsx("label",{htmlFor:"user_tel",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"電話"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx("input",{...u("user_tel",{pattern:{value:/^(0[2-8]-\d{7,8}|09\d{8})$/,message:"市話格式為02-12345678手機格式為0912456789"}}),type:"tel",className:`form-control ${d.user_tel&&"is-invalid"}`,id:"user_tel",name:"user_tel",value:f.user_tel,onChange:p}),e.jsx("div",{className:"error-message text-danger mt-1",children:d.user_tel?d.user_tel.message:"　"})]})]}),e.jsxs("div",{className:"row mb-5",children:[e.jsx("label",{htmlFor:"user_email",className:"col-sm-2 fs-Body-2 fs-sm-Body-1 mb-2 mb-sm-0",children:"第三方登入"}),e.jsxs("div",{className:"col-sm-10",children:[e.jsx(V,{size:24,className:"me-3"}),e.jsx(Q,{size:24})]})]})]})}),e.jsx("div",{className:"px-6 py-4 border-nature-90 border-1 border-top",children:e.jsxs("div",{className:"btn_2 d-flex text-center flex-column flex-sm-row ",children:[e.jsx("button",{type:"reset",className:"btn bg-nature-60 text-white me-sm-6 mb-sm-0 mb-2",disabled:!g,form:"userinfoform",children:"取消更改"}),e.jsx("button",{type:"submit",className:"btn bg-secondary-60 text-white",form:"userinfoform",disabled:!g,children:"儲存變更"})]})})]})]}),e.jsx(Y,{})]}),e.jsx("div",{ref:_,className:"modal fade m-0",id:"updatePawwordModal",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-secondary-95 flex-column align-items-start",children:[e.jsx("h4",{className:"modal-title fw-bold mb-2",children:"修改密碼"}),e.jsx("p",{children:"請先輸入目前密碼進行驗證"})]}),e.jsxs("div",{className:"modal-body px-5 py-10",children:[e.jsx("input",{type:"password",className:"w-100 border border-1 border-black rounded-1 ",ref:o}),e.jsx("div",{className:`error-message ${h==="尚未驗證"?"text-secondary-40":"text-danger"}  mt-1 fs-caption lh-1`,children:h})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"btn_2 d-flex text-center ",children:[e.jsx("button",{type:"button",className:"btn bg-nature-60 text-white me-6",onClick:D,children:"取消更改"}),e.jsx("button",{type:"button",className:"btn bg-secondary-60 text-white",onClick:I,children:"下一步"})]})})]})})}),e.jsx("div",{ref:n,className:"modal fade m-0",id:"updatePawwordModal",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header bg-secondary-95",children:e.jsx("h4",{className:"modal-title fw-bold ",children:"修改密碼"})}),e.jsxs("div",{className:"modal-body px-6 py-10",children:[e.jsx("input",{type:"password",className:"w-100 border border-1 border-black rounded-1 ",ref:a}),e.jsx("div",{className:`error-message ${h==="尚未驗證"?"text-secondary-40":"text-danger"}  mt-1 fs-caption lh-1`,children:h})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"btn_2 d-flex  text-center ",children:[e.jsx("button",{type:"button",className:"btn bg-nature-60 text-white me-6",onClick:$,children:"取消更改"}),e.jsx("button",{type:"button",className:"btn bg-secondary-60 text-white",onClick:l,children:"儲存變更"})]})})]})})})]})},E="https://new-json.onrender.com",ee=()=>{const{user:x}=t.useContext(M),u=x.user_id,[j,d]=t.useState([]),[c,f]=t.useState(!0),[b,g]=t.useState([]),[N,h]=t.useState(!0),[y,_]=t.useState("nowGroup"),[n,o]=t.useState(!0);return t.useEffect(()=>{(async()=>{let C=[],p=[];try{(await k.get(`${E}/usersData/${u}/groupsData`)).data.map(l=>{!l.group_cancel&&l.group_isSuccessful===null?C.push(l):l.group_cancel&&l.group_isSuccessful?(l.status="已遊玩結束",p.push(l)):l.group_cancel&&!l.group_isSuccessful&&(l.status="已棄團",p.push(l))})}catch(I){console.log(I.response.data.errors[0])}finally{o(!1)}try{o(!0),(await k.get(`${E}/groupsData`)).data.map(l=>{l.group_participants.includes(u)&&(!l.group_cancel&&l.group_isSuccessful===null?C.push(l):l.group_cancel&&l.group_isSuccessful?(l.status="已遊玩結束",p.push(l)):l.group_cancel&&!l.group_isSuccessful&&(l.status="已棄團",p.push(l)))})}catch(I){console.log(I.response.data.errors[0])}finally{o(!1)}C.length===0?f(!1):d(C),p.length===0?h(!1):g(p)})()},[u]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"m-0 pt-10 px-0 d-none d-lg-block",children:[e.jsxs("div",{className:"border-nature-90 border rounded-2",children:[e.jsx("div",{className:"custom-userGroupTitle lh-normal bg-secondary-95 px-6 py-5 text-secondary-50 fw-bold fs-h6",children:"揪團中"}),e.jsx("div",{className:"p-6 bg-white",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-light px-3",children:e.jsxs("tr",{className:"border-bottom border-nature-95 ",children:[e.jsx("th",{scope:"col",className:"text-secondary-40 ps-6 py-3 pe-0",children:"密室名稱"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"密室地點"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"遊玩日期"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"目前人數/人數上限"}),e.jsx("th",{scope:"col",className:"text-secondary-40 pe-6 py-3 ps-0"})]})}),e.jsxs("tbody",{children:[n&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"bg-white py-3",children:e.jsx(B,{message:"載入揪團列表中"})})}),!n&&c&&j.map(a=>e.jsxs("tr",{className:"border-bottom border-nature-95",children:[e.jsx("td",{className:"ps-5 py-2 pe-0",children:a.game_name}),e.jsx("td",{className:"py-2 px-0",children:a.game_address}),e.jsx("td",{className:"py-2 px-0",children:a.group_active_date}),e.jsxs("td",{className:"py-2 px-0",children:[a.group_participants.length,"人/",a.group_member,"人"]}),e.jsx("td",{className:"pe-5 py-2 ps-0",children:e.jsxs(v,{to:`/TeamBuyComment/${a.group_id}`,className:"text-black",children:["查看詳情 ",e.jsx(U,{color:"black"})]})})]},a.group_id)),!n&&!c&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6 bg-white py-2",children:e.jsxs("p",{children:["沒有正在進行中的揪團",e.jsx("br",{}),"快到",e.jsx(v,{className:"d-inline text-nowrap",to:"/TeamBuy",children:"揪團中"}),"找尋你想玩的密室，一起加入吧！"]})})})]})]})})]}),e.jsxs("div",{className:"border-nature-90 border rounded-2 my-10",children:[e.jsx("div",{className:"custom-userGroupTitle lh-normal bg-secondary-95 px-6 py-5 text-secondary-50 fw-bold fs-h6",children:"歷史揪團"}),e.jsx("div",{className:"p-6 bg-white",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-light px-3",children:e.jsxs("tr",{className:"border-bottom border-nature-95 ",children:[e.jsx("th",{scope:"col",className:"text-secondary-40 ps-6 py-3 pe-0",children:"狀態"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"密室名稱"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"密室地點"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"遊玩日期"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"參與人數/人數上限"})]})}),e.jsxs("tbody",{children:[n&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"bg-white py-3",children:e.jsx(B,{message:"載入揪團列表中"})})}),!n&&N&&b.map(a=>e.jsxs("tr",{className:"border-bottom border-nature-95",children:[e.jsx("td",{className:"py-2 py-2 pe-0",children:a.status}),e.jsx("td",{className:"py-2 px-0",children:a.game_name}),e.jsx("td",{className:"py-2 px-0",children:a.game_address}),e.jsx("td",{className:"py-2 px-0",children:a.group_active_date}),e.jsxs("td",{className:"pe-5 py-2 ps-0",children:[a.group_participants.length,"人/",a.group_member,"人"]})]},a.group_id)),!n&&!N&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center fs-h6 bg-white py-2",children:e.jsxs("p",{children:["未參加過任何揪團",e.jsx("br",{}),"快到",e.jsx(v,{className:"d-inline text-nowrap",to:"/TeamBuy",children:"揪團中"}),"找尋你想玩的密室，一起加入吧！"]})})})]})]})})]})]}),e.jsxs("div",{className:"m-0 d-block d-lg-none",children:[e.jsxs("div",{className:"d-flex m-0 pt-5 ps-3 pb-3",children:[e.jsx("button",{className:`  btn border-1 border-secondary-50 me-3  fw-bold rounded-16 ${y==="nowGroup"?"bg-secondary-50 text-secondary-99":"text-secondary-50"}`,onClick:()=>_("nowGroup"),children:"揪團中"}),e.jsx("button",{className:`  btn border-1 border-secondary-50 rounded-16 fw-bold ${y==="historyGroup"?"bg-secondary-50 text-secondary-99":"text-secondary-50"}`,onClick:()=>_("historyGroup"),children:"歷史揪團"})]}),y==="nowGroup"&&e.jsxs("div",{className:"",children:[e.jsx("div",{className:"custom-userGroupTitle lh-normal bg-secondary-95 px-4 py-5 text-secondary-50 fw-bold fs-h6",children:"揪團中"}),n&&e.jsx("dl",{children:e.jsx("dt",{className:"bg-white py-3",children:e.jsx(B,{message:"載入揪團列表中"})})}),!n&&c&&j.map(a=>e.jsxs("dl",{className:"mb-4 bg-white p-4",children:[e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"密室名稱"}),e.jsx("dd",{children:a.game_name}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"密室地點"}),e.jsx("dd",{children:a.game_address}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"遊玩日期："}),e.jsx("dd",{children:a.group_active_date}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"目前人數/人數上限"}),e.jsxs("dd",{className:"mb-3",children:[a.group_participants.length,"人/",a.group_member,"人"]}),e.jsx("dd",{className:"py-1 m-0",children:e.jsxs(v,{to:`/TeamBuyComment/${a.group_id}`,className:"text-black fw-bold fs-Caption",children:["查看詳情 ",e.jsx(U,{color:"black"})]})})]},a.group_id)),!n&&!c&&e.jsx("dl",{children:e.jsx("dt",{className:"text-center fs-h6 bg-white py-2",children:e.jsxs("p",{children:["沒有正在進行中的揪團",e.jsx("br",{}),"快到",e.jsx(v,{className:"d-inline text-nowrap",to:"/TeamBuy",children:"揪團中"}),"找尋你想玩的密室，一起加入吧！"]})})})]}),y==="historyGroup"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"custom-userGroupTitle lh-normal bg-secondary-95 px-4 py-5 text-secondary-50 fw-bold fs-h6",children:"歷史揪團"}),n&&e.jsx("dl",{children:e.jsx("dt",{className:"bg-white py-3",children:e.jsx(B,{message:"載入揪團列表中"})})}),!n&&N&&b.map(a=>e.jsxs("dl",{className:"mb-4 bg-white p-4",children:[e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"狀態"}),e.jsx("dd",{children:a.status}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"密室名稱"}),e.jsx("dd",{children:a.game_name}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"密室地點"}),e.jsx("dd",{children:a.game_address}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"遊玩日期："}),e.jsx("dd",{children:"2025/01/30"}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"參與人數/人數上限"}),e.jsxs("dd",{className:"mb-3",children:[a.group_participants.length,"人/",a.group_member,"人"]})]},a.group_id)),!n&&!N&&e.jsx("dl",{children:e.jsx("dt",{className:"text-center fs-h6 bg-white py-2",children:e.jsxs("p",{children:["未參加過任何揪團",e.jsx("br",{}),"快到",e.jsx(v,{className:"d-inline text-nowrap",to:"/TeamBuy",children:"揪團中"}),"找尋你想玩的密室，一起加入吧！"]})})})]})]})]})},H="https://new-json.onrender.com",se=()=>{const{user:x}=t.useContext(M),u=x.user_id,j=O(),[d,c]=t.useState([]),[f,b]=t.useState([]),[g,N]=t.useState(!0),[h,y]=t.useState(!0),_=t.useRef(null),n=t.useRef(null),[o,a]=t.useState({}),C=t.useCallback(async()=>{let s=[],i=[];try{const m=await k.get(`${H}/usersData/${u}/commentsData`);if(typeof m.data[0]=="string")N(!1);else if(typeof m.data[0]=="object")for(s of m.data)try{const r=await k.get(`${H}/gamesData/${s.game_id}`);s.game_name=r.data.game_name,s.game_dif_tagname=r.data.game_dif_tagname,s.game_main_tag1name=r.data.game_main_tag1name,s.game_main_tag2name=r.data.game_main_tag2name,i.push(s)}catch(r){console.log(r.response.data.errors[0])}}catch(m){console.log(m.response.data.errors[0])}finally{y(!1)}c(i)},[u]),p=(s,i=5)=>{const m=[];for(let r=0;r<s;r++)m.push(e.jsx(W,{},`filled-${r}`));if(m.length===5)return m;for(let r=s;r<i;r++)m.push(e.jsx(X,{},`empty-${r}`));return m},I=(s,i)=>JSON.stringify(s).length>i?s.slice(0,i)+"...":s,l=async()=>{try{await k.delete(`${H}/commentsData/${f}`),C(),$(),D()}catch(s){console.log(s.response.data.errors[0]),j(T({text:"刪除評論失敗",status:"error"}))}},P=s=>{a(s),w.getInstance(_.current).show()},D=()=>{w.getInstance(_.current).hide()},F=(s,i)=>{i==="desktop"?b(s):(a(s),b(s.comment_id)),w.getInstance(n.current).show()},$=()=>{w.getInstance(n.current).hide()};return t.useEffect(()=>{new w(_.current),new w(n.current)},[]),t.useEffect(()=>{C()},[C]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"m-0  px-0 d-none d-lg-block ",children:e.jsxs("div",{className:"border-nature-90 border rounded-2 my-10",children:[e.jsx("div",{className:"custom-userGroupTitle lh-normal bg-secondary-95 px-6 py-5 text-secondary-50 fw-bold fs-h6",children:"我的評論"}),e.jsx("div",{className:"p-6 bg-white",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-light px-3",children:e.jsxs("tr",{className:"border-bottom border-nature-95  ",children:[e.jsx("th",{scope:"col",className:"text-secondary-40 ps-6 py-3 pe-0",children:"遊玩日期"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"密室名稱"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"整體評價"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"通關狀態"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"難度"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"主題特色"}),e.jsx("th",{scope:"col",className:"text-secondary-40 py-3 px-0",children:"體驗心得"}),e.jsx("th",{scope:"col",className:"text-secondary-40 pe-6 py-3 ps-0"})]})}),e.jsxs("tbody",{children:[h&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"bg-white py-3",children:e.jsx(B,{message:"載入評論中"})})}),!h&&g&&d.map(s=>e.jsxs("tr",{className:"border-bottom border-nature-95",children:[e.jsx("td",{className:"ps-5 py-2 pe-0",children:s.commet_played_time}),e.jsx("td",{className:"py-2 px-0",children:s.game_name}),e.jsx("td",{className:"py-2 px-0",children:p(s.coment_star)}),e.jsx("td",{className:"py-2 px-0",children:s.comment_isPass?"通關":"未通關"}),e.jsx("td",{className:"py-2 px-0",children:s.game_dif_tagname}),e.jsxs("td",{className:"py-2 px-0",children:[s.game_main_tag1name,"、",s.game_main_tag2name]}),e.jsx("td",{className:"py-2 px-0",children:I(s.coment_content,10)}),e.jsx("td",{className:"pe-5 py-2 ps-0",children:e.jsxs("button",{onClick:()=>P(s),className:"text-black border-0 fs-Body-1 btn btn-white p-0   m-0 ",children:["查看詳情 ",e.jsx(U,{color:"black"})]})})]},s.comment_id)),!h&&!g&&e.jsx("tr",{children:e.jsxs("td",{colSpan:8,className:"text-center fs-h6 bg-white py-2",children:["未留下任何評論，",e.jsx("br",{}),"歡迎到密室頁面分享你的心得讓更多人參考！"]})})]})]})})]})}),e.jsxs("div",{className:"d-block d-lg-none m-0",children:[e.jsx("div",{className:"custom-userGroupTitle lh-normal bg-secondary-95 px-4 py-5 text-secondary-50 fw-bold fs-h6",children:"我的評論"}),h&&e.jsx("dl",{children:e.jsx("dt",{className:"bg-white py-3",children:e.jsx(B,{message:"載入評論中"})})}),!h&&g&&e.jsx(e.Fragment,{children:d.map(s=>e.jsxs("div",{className:"mb-4 bg-white",children:[e.jsxs("dl",{className:" p-3 m-0 ",children:[e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"遊玩日期"}),e.jsx("dd",{children:s.commet_played_time}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"密室名稱"}),e.jsx("dd",{children:s.game_name}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"整體評價"}),e.jsx("dd",{children:p(s.coment_star)}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"通關狀態"}),e.jsx("dd",{children:s.comment_isPass?"通關":"未通關"}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"難度"}),e.jsx("dd",{children:s.game_dif_tagname}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"主題特色"}),e.jsxs("dd",{children:[s.game_main_tag1name,"、",s.game_main_tag2name]}),e.jsx("dt",{className:"fs-Caption fw-bold text-nature-50 mb-1",children:"體驗心得"}),e.jsx("dd",{className:"m-0",children:e.jsx("pre",{className:"fs-Body-1 text-black m-0",children:s.coment_content})})]}),e.jsxs("div",{className:"d-flex px-3 py-6 flex-column gap-2",children:[e.jsx("button",{className:"btn bg-nature-60 text-white",onClick:()=>F(s),children:"刪除"}),e.jsx(v,{type:"button",className:"btn bg-secondary-60 text-white",to:`/Game_comment/edit/${s.comment_id}`,children:"編輯"})]})]},s.comment_id))}),!h&&!g&&e.jsx(e.Fragment,{children:e.jsx("dl",{children:e.jsx("dt",{className:"text-center fs-h6 bg-white py-2",children:e.jsxs("p",{children:["未留下任何評論，",e.jsx("br",{}),"歡迎到密室頁面分享你的心得讓更多人參考！"]})})})})]}),e.jsx("div",{ref:_,className:"modal fade m-0",id:"detailComment ",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header bg-secondary-95 flex-column align-items-start",children:e.jsx("h4",{className:"modal-title fw-bold mb-2",children:o.game_name})}),e.jsxs("div",{className:"modal-body px-6 py-3",children:[e.jsxs("div",{className:"star mb-4",children:[e.jsx("span",{className:"mb-2",children:"整體評價"}),e.jsx("p",{className:"text-black",children:p(o.coment_star)})]}),e.jsxs("div",{className:"dif mb-4",children:[e.jsx("span",{className:"mb-2 fs-Body-2 fw-bold text-nature-50",children:"難度"}),e.jsx("p",{className:"text-black",children:o.game_dif_tagname})]}),e.jsxs("div",{className:"features mb-4",children:[e.jsx("span",{className:" fw-bold text-nature-50",children:"主題特色"}),e.jsxs("div",{className:"tags d-flex flex-wrap mt-2 gap",children:[e.jsx("span",{className:" bg-nature-95 px-2 py-1 rounded-3  text-nowrap me-2",children:o.game_main_tag1name}),e.jsx("span",{className:" bg-nature-95 px-2 py-1 rounded-3  text-nowrap",children:o.game_main_tag2name})]})]}),e.jsxs("div",{className:"pass mb-4",children:[e.jsx("span",{className:"mb-2 fs-Body-2 fw-bold text-nature-50",children:"通關狀態"}),e.jsx("p",{className:"text-black",children:o.comment_isPass?"通關":"未通關"})]}),e.jsxs("div",{className:"date mb-4",children:[e.jsx("span",{className:"mb-2 fs-Body-2 fw-bold text-nature-50",children:"遊玩日期"}),e.jsx("p",{className:"text-black",children:o.commet_played_time})]}),e.jsxs("div",{className:"isSpoilered mb-4",children:[e.jsx("span",{className:"mb-2 fs-Body-2 fw-bold text-nature-50",children:"是否劇透"}),e.jsx("p",{className:"text-black",children:o.comment_isSpoilered?"有劇透":"無劇透"})]}),e.jsxs("div",{className:"conten",children:[e.jsx("span",{className:"mb-2 fs-Body-2 fw-bold text-nature-50",children:"體驗心得"}),e.jsx("pre",{className:"fs-Body-1 text-black",children:o.coment_content})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"btn_2 d-flex  text-center ",children:[e.jsx("button",{type:"button",className:"btn bg-nature-60 text-white me-6",onClick:()=>F(o.comment_id,"desktop"),children:"刪除"}),e.jsx(v,{type:"button",className:"btn bg-secondary-60 text-white",to:`/Game_comment/edit/${o.comment_id}`,onClick:D,children:"編輯"})]})})]})})}),e.jsx("div",{ref:n,className:"modal fade",id:"delCommentModal",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h1",{className:"modal-title fs-5",children:"刪除此則評論"}),e.jsx("button",{onClick:$,type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:["你是否要刪除",e.jsxs("span",{className:"text-danger fw-bold",children:[" ",o.game_name," "]}),"此則遊戲的評論內容"]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{onClick:$,type:"button",className:"btn btn-secondary",children:"取消"}),e.jsx("button",{onClick:l,type:"button",className:"btn btn-danger",children:"刪除"})]})]})})}),e.jsx(Y,{})]})};function oe(){const{user:x,user_token:u}=J(h=>h.userInfo),{user_id:j,activedefaultTab:d}=z(),[c,f]=t.useState(!1),[b,g]=t.useState(d),N=t.useCallback(()=>{u&&Number(j)===Number(x.user_id)?f(!0):f(!1)},[x==null?void 0:x.user_id,j,u]);return t.useEffect(()=>{N(),g(d)},[j,d,N]),e.jsx(e.Fragment,{children:c?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"custom-profileMain flex-grow-1",children:[e.jsx("div",{className:"container-fluid bg-primary-99",children:e.jsx("div",{className:"container-lg ",children:e.jsx("div",{className:"row pt-10 ",children:e.jsxs("ul",{className:"d-flex",children:[e.jsx("li",{children:e.jsx(v,{className:`custom-profileTab fs-lg-h6 fs-Body-1 lh-base lh-lg-normal fw-bold ${b==="basicInfo"?"active":""} `,to:`/User_profile/${j}/basicInfo`,children:"基本資訊"})}),e.jsx("li",{children:e.jsx(v,{className:`custom-profileTab fs-lg-h6 fs-Body-1 lh-base lh-lg-normal fw-bold ${b==="participatingGroup"?"active":""} `,to:`/User_profile/${j}/participatingGroup`,children:"參加的揪團"})}),e.jsx("li",{children:e.jsx(v,{className:`custom-profileTab fs-lg-h6 fs-Body-1 lh-base lh-lg-normal fw-bold ${b==="myComments"?"active":""} `,to:`/User_profile/${j}/myComments`,children:"留下的評論"})})]})})})}),e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"",children:e.jsx("div",{className:"container-lg",children:e.jsx("div",{className:"row m-0 flex-column flex-md-row g-5 justify-content-center align-items-center",children:e.jsxs(M.Provider,{value:{user:x},children:[b==="basicInfo"&&e.jsx(Z,{}),b==="participatingGroup"&&e.jsx(ee,{}),b==="myComments"&&e.jsx(se,{})]})})})})})]})}):e.jsx("div",{className:"my-md-10 my-sm-0",children:e.jsx("div",{className:"container-lg",children:e.jsx("div",{className:"row flex-column flex-md-row g-0",children:e.jsx("p",{className:"h1 text-center",children:"尚未登入，或此頁面非您的會員ID"})})})})})}export{oe as default};
